

# 华南师范大学计算机学院 - 编译原理课程设计任务书



**整理：** 黄煜廉 1**时间：** 2025.09 2



------

第一部分：课程设计任务 3



### 一、任务要求内容



(红色部分的要求是必做内容) 4



第一项课程设计任务要求：词法分析 5



1. 

   **输入方式**：以文本文件的方式输入某一高级程序设计语言的所有单词对应的正则表达式。系统需提供一个操作界面，让用户打开该文本文件（格式可自定义）。6

   

   

2. 

   **正则运算支持**：正则表达式应支持命名操作。支持的运算符号包括：转义符号(`\`)、连接、选择(`|`)、闭包(`*`)、正闭包(`+`)、`[]`、可选(`?`)、括号`()`。7

   

   

3. 

   **编辑界面**：提供一个源程序编辑界面，让用户输入一行或多行正则表达式（支持保存、打开文件）。8

   

   

4. 

   **NFA 查看**：提供窗口查看转换得到的 NFA（用状态转换表呈现）。9

   

   

5. 

   **DFA 查看**：提供窗口查看转换得到的 DFA（用状态转换表呈现）。10

   

   

6. 

   **最小化 DFA 查看**：提供窗口查看转换得到的最小化 DFA（用状态转换表呈现）。11

   

   

7. 

   **生成词法分析程序**：将最小化 DFA 转换成词法分析源程序（C/C++描述，只能采用讲稿中的转换方法一或二），并提供窗口查看生成的源程序。12

   

   

8. 

   **编译与测试**：将生成的源程序编译为可执行程序，并以该高级语言的一个源程序进行测试，输出单词编码。提供窗口查看输出的单词编码。13

   

   

9. 

   **系统测试流程**：14

   

   

   - (A) 以 **TINY 语言**的所有单词正则表达式为输入，生成 TINY 的词法分析源程序。
   - (B) 利用 C/C++ 编译器编译该源程序，生成可执行文件。
   - (C) 使用 `sample.tny` 进行测试，输出单词编码文件 `sample.lex`。

10. 

    **界面要求**：应用程序需为窗口式图形界面。15

    

    

11. 

    **文档**：书写完善的软件文档。16

    

    



**输入格式要求及说明示例：** 17



Plaintext

```
digit=[0-9]
letter=[A-Za-z]
_num100=(\+/-)?digit+
_ID101=letter (letter|digit)*
_specail200S= \+ |- | * |/| = | < | < | <<
```

*说明：*

- (1) 命名中加下划线 (`_`) 表示该正则表达式需要生成 DFA 图。18

  

  

- (2) 名字后的数值为对应单词的编码。19

  

  

- (3) 名字后数值加上 `S` 表示后面有多个单词，但编码从该数值开始递增。20

  

  

- (4) 整数中的正号(+)和乘号(*)因被用作闭包运算，需使用转义符号 `\` 区分（如 `\+`, `\*`）。21

  

  

第二项课程设计任务要求：语法分析 22



1. 

   **输入方式**：以文本文件方式输入某一高级语言的所有语法对应的 BNF 文法。系统需提供界面打开该文件。23

   

   

2. 

   **First/Follow 集合**：求出每个非终结符的 First 和 Follow 集合，并以表格形式在窗口展示。24

   

   

3. 

   **LR(0) DFA**：提供窗口查看对应的 LR(0) DFA 图（画图或表格呈现点与边）。25

   

   

4. 

   **SLR(1) 判断**：判断是否为 SLR(1) 文法。若不是，需显示原因。26

   

   

5. 

   **LR(1) DFA**：提供窗口查看对应的 LR(1) DFA 图（画图或表格呈现）。27

   

   

6. 

   **LR(1) 分析表**：提供窗口以表格形式查看 LR(1) 分析表。28

   

   

7. 

   **语法分析过程**：打开对应的源程序（任务一的输出文件），采用 LR(1) 方法对每个语句进行分析，并提供窗口逐行显示分析过程。29

   

   

8. 

   **语法树生成**：在分析过程中生成语法树，并以树状形式在窗口呈现。30

   

   

9. 

   **系统测试**：以 **TINY 语言**的所有语法及任务一生成的 `sample.lex` 进行测试，生成并呈现语法树。31

   

   

10. 

    **界面要求**：窗口式图形界面。32

    

    

11. 

    **文档**：书写完善的软件文档。33

    

    

12. 

    **选做内容**：生成某种中间代码（形式自定）。34

    

    



输入格式说明： 35

输入的文法为上下文无关文法（2型文法）。默认第一个非终结符为开始符号，# 表示空串 ε。

例1：

Plaintext

```
E->E+T
T->a|#
```

（E 是开始符号，# 代表空串）36



*例2：*

Plaintext

```
exp -> exp addop term | term
addop -> + | -
term -> term mulop factor | factor
mulop -> * | /
factor -> (exp) | n
```

（exp 是开始符号）37



第三项课程设计任务要求：Mini-C 综合测试 38



1. 

   **Mini-C 词法测试**：以 Mini-C 的词法进行测试，并编写至少一个 Mini-C 源程序进行词法分析测试。39

   

   

2. 

   **Mini-C 语法测试**：以 Mini-C 的语法进行测试，使用步骤(1)生成的单词编码文件进行语法分析，生成语法树。40

   

   

二、选做内容 41



1. 采用 LR(1) 语法分析方法进行分析并生成相应的中间代码（四元组、三元组、伪代码等均可），结果显示在屏幕或保存为文件。42

   

   

------

第二部分：编程要求 43



1. 

   **编程语言**：只能使用 **C/C++** 语言，开发平台不限。44

   

   

2. 

   **风格**：程序应具有良好的编程风格。45

   

   

3. 

   **注释要求**：46

   

   

   - 

     **Readme 文件**：对上交内容进行解释。47

     

     

   - 

     **源程序文件头**：包含版权信息、文件名/功能说明、版本号/作者/日期、版本历史。48

     

     

   - 

     **代码注释**：宏定义、非局部变量需加注释；函数前需有功能说明、接口信息及注意事项；关键代码处加注释。49

     

     

------

第三部分：课程设计进度安排 50



| **时间**            | **进度安排**                                                 |
| ------------------- | ------------------------------------------------------------ |
| **第1周**           | 任课老师进行课程设计介绍 51                                  |
| **第1周 ~ 第5周**   | 完成**第一项任务**（软件设计及报告），并以 Tiny 语言进行词法测试及写测试报告 52 |
| **第6周 ~ 第10周**  | 完成**第二项任务**（软件设计及报告），并以 Tiny 语言进行语法测试及写测试报告 53 |
| **第11周 ~ 第13周** | 1. 以 **Mini-C** 进行整个系统的功能测试（含词法、语法），书写测试报告   2. 完成实验报告整合和自评   3. 书写系统使用说明书   4. 录制讲解视频（15分钟） 54 |
| **第14周**          | **提交资料**（周五晚12点前）：源程序、测试文本/程序、测试报告、可执行程序、说明书、报告书、讲解视频。提交至砺儒云课堂。 55 |
| **第15 ~ 17周**     | 1. 抽查、评分   2. 被抽查同学需到实验室解释相关工作 56       |

------

第四部分：课程设计评分标准 57



主要依据软件系统设计、运行测试情况、实验报告及讲解视频评分（系统和文档各占45%，视频占10%）。58



- 

  **E < 60**：必做功能累计未能完成超过 3/5。59

  

  

- 

  **60 < D < 70**：上交所有材料。必做功能完成超过 3/5 但未全完成。视频思路完整，文档基本规范，界面基本符合要求。60

  

  

- 

  **70 < C < 80**：上交所有材料。完成**所有必做功能**（除选做外）。视频符合要求，文档规范，代码风格好，界面美观。61

  

  

- 

  **80 < B < 90**：完成**所有必做功能**及**部分选做内容**。视频清晰，文档规范清晰，设计思想清晰，界面美观好用。62

  

  

- 

  **90 < A < 100**：完成**所有必做功能**及**全部选做内容**，且功能完善。视频十分清晰，文档十分规范，设计思想十分清晰，界面美观方便。63

  

  

------

第五部分：测试内容及要求 (Mini-C 规范) 64



1. Mini-C 的单词定义 65



1. 关键字（保留字，必须小写）：

   

   

   `else`, `if`, `int`, `float`, `real`, `return`, `void`, `while`, `for` 66

   

   

2. 专用符号：

   

   

   `+`, `-`, `*`, `/`, `%`, `.`, `<`, `<=`, `>`, `>=`, `=`, `!=`, `==`, `;`, `,`, `(`, `)`, `[`, `]`, `{`, `}` 67

   

   

3. **标识符与数字**：

   - 

     `ID = (letter) (_|letter|digit)*` 68

     

     

   - 

     `NUM = digit+(.digit+)?` 69

     

     

   - 

     `letter = [a-zA-Z]` (区分大小写) 70707070

     

     

   - 

     `digit = [0-9]` 71

     

     

4. 

   **空格**：由空白、换行符、制表符组成，通常被忽略（除分隔 ID/NUM/关键字外）。72

   

   

5. 

   **注释**：使用 `//` 进行行注释，不可嵌套。73

   

   

6. Mini-C 的语法 (BNF) 74



*(注：以下编号对应文档中的规则列表，部分规则根据文档上下文进行了整理)*

BNF

```
1.  program -> definition-list
2.  definition-list -> definition-list definition | definition
3.  definition -> variable-definition | function-definition
4.  variable-definition -> type-indicator ID; | type-indicator ID [NUM];
5.  type-indicator -> int | float | real | void
6.  function-definition -> type-indicator ID (parameters) compound-stmt
7.  parameters -> parameter-list | void
8.  parameter-list -> parameter-list, parameter | parameter
9.  parameter -> type-indicator ID | type-indicator ID[]
10. compound-stmt -> { local-definitions statement-list }
11. local-definitions -> local-definitions variable-definition | empty
12. statement-list -> statement-list statement | empty
13. statement -> expression-stmt | compound-stmt | condition-stmt | while-stmt | for-stmt | return-stmt
14. expression-stmt -> expression; | ;
15. condition-stmt -> if (expression) statement | if (expression) statement else statement
16. while-stmt -> while (expression) statement
17. for-stmt -> for (for-init; expression; for-update) statement
18. for-init -> expression-stmt | variable-definition | empty
19. for-update -> expression-list | empty
20. expression-list -> expression-list, expression | expression
21. return-stmt -> return; | return expression;
22. expression -> variable = expression | simple-expression
23. variable -> ID | ID [expression]
24. simple-expression -> additive-expression relop additive-expression | additive-expression
25. relop -> <= | < | > | >= | == | !=
26. additive-expression -> additive-expression addop term | term
27. addop -> + | -
28. term -> term mulop factor | factor
29. mulop -> * | / | %
30. factor -> (expression) | variable | call | NUM | ++variable | --variable
31. call -> ID(arguments)
32. arguments -> argument-list | empty
33. argument-list -> argument-list, expression | expression
```



*(注：empty 表示空串 ε，输入时可用 # 替代)* 75757575



3. Mini-C 语义解释 76



- 

  **程序结构**：由变量定义或函数定义组成的列表。使用前必须定义。程序最后一个定义必须是名为 `main` 的函数。无函数原型。77

  

  

- 

  **变量类型**：基本类型有 `int`, `float`, `real`。`void` 仅用于函数。支持一维数组（索引 0 到 NUM-1）。每个定义只能定义一个变量。78

  

  

- **函数**：

  - `void` 返回类型表示过程。

  - 参数可以是 `void`（无参）。

  - 简单类型参数按值传递；数组参数按引用（指针）传递，调用时需匹配数组变量。

  - 函数参数作用域为函数体。支持递归。79

    

    

- 

  **复合语句**：局部定义覆盖全局定义。80

  

  

- **控制流**：

  - 

    `if` 语句：非0为真，0为假。存在“悬挂 else”二义性，按“最近嵌套”原则解决。81

    

    

  - 

    `while` 语句：表达式非0时重复执行。82

    

    

  - 

    `for` 语句：包含初始化、条件和更新部分。83

    

    

  - 

    `return`：必须根据函数定义返回对应值或不返回值。84

    

    

- **表达式**：

  - 赋值：`=` 右边值存入左边地址，并作为表达式的值返回。85

    

    

  - 左值（L-value）：仅 `variable` 语法结构可作左值。禁止指针运算。86

    

    

  - 简单表达式：无结合的关系操作符。真为1，假为0。87

    

    

  - 算术运算：`+`, `-`, `*`, `/`, `%`。`/` 对整数截断，`%` 仅支持整数。88

    

    

  - 因子：支持前置自增 `++` 和自减 `--`。89

    

    

  - 函数调用：参数数量必须匹配。数组参数必须与数组变量标识符匹配。90

    

    

------

附录：界面要求范例 91



1. 

   **文件打开界面**：应能浏览文件系统，选择 `.txt` 等文本文件。92929292

   

   

2. 

   **错误/警告显示**：类似 IDE 的列表，显示错误代码、文件、行号。93

   

   

3. **语法树呈现**：

   - 支持树状结构展开/折叠。

   - 显示节点类型（如 `start`, `if`, `assign`, `op`, `id`, `const`）。

   - 支持图形化连线展示（如文档中图示的树形图）。949494949494949494

     

     